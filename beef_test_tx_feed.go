package bux

import (
	"encoding/json"

	"github.com/libsv/go-bc"
)

// real tx feed
func getAlreadySpendedTx() *Transaction {
	// tx sended from handcash to false_tx_test@bux-wallet1.4chain.dev, all satoshis (1500) were sended back
	// https://www.whatsonchain.com/tx/2427e53681a3f21d295497888bceb4c97d1a0cec2ac9e4f016d61dd2128b0f15
	//txID := "2427e53681a3f21d295497888bceb4c97d1a0cec2ac9e4f016d61dd2128b0f15"
	txHex := "010000000224bb8a3d4f0b2035288bfedb062f12781d3e6eed1755763032e20e323d192f2d000000006a473044022029b16927ef8b7c6553f23d5368886681ace96daaf03ca666285e10dce7a5fa3302204a551a4c25789e23490d0534a70838caa1955b397f41fec82375f897095655e04121036add0f78cbf6f7d83c07b5d8db1d416fbf491544b7b16bc3bc0607af35ffdb8effffffff1c25c0777758266bd12bba8be518722c0a3c41a5ae691528d8374c4a55643ddc010000006a47304402201baa3d559ecda0b76f605780e2dc164b6fb627b6e6c07e9a35cb7dd8c9e83fc30220128d8d9dece522c8e34b042a26def20bb13a5774130ca64eea9bd3f04eaa993b4121020c34c26466cc70fd54348d98a63fddbd3cf6075c98f16a24a7fba5cc83697052ffffffff03dc050000000000001976a914fc1c2fdddd7e90d0a88f3a5d22c20260c281fc3b88acac0d0000000000001976a914817ebd5a7b67bc411ad232af8e74574e29a6ab3788acf9000000000000001976a914a02f449196c8f3f14461b240efa86c470327928088ac00000000"
	blockHeight := uint64(814395)
	merkleProofJson := "{\"index\":11173,\"txOrId\":\"2427e53681a3f21d295497888bceb4c97d1a0cec2ac9e4f016d61dd2128b0f15\",\"targetType\":\"header\",\"target\":\"008001206b36aa94cff773fad885c9b969a618691bc2a6c34fe576010000000000000000d75bd60b27a1a4083b674970c264efbca62b35ff77df7f9ba18597a6c21e1b0b33bb2f6571d90b18cfe9dbce\",\"nodes\":[\"786a84ba80d035dbf401768008864af6064e321e97608f9234ff16d0e46c6a10\",\"9f41dbb064e154b777184807e85f8b0c5feaf86a885713f5f803d9f5cc232359\",\"602d93502ec3dde3101c10f0a6381d5fb92f0af9edbf7f659dbbd4291c8c8eb9\",\"0eaba2c4e27a6baee2e7323a255a457b700ed64ec49c7c539cb7996d8194980f\",\"c8971afa566b3aa958af6e37d9b8d5f203b647771246c6b014c4b31f0adf7bbb\",\"ce33a2712e665af1105af6e4ccc4de58d82d7502586f6806898d4eb839d1f53c\",\"38e941a638af1f5118c1808811675ec36fa1b47311e9f95314bd4b3d0bd7b0bf\",\"1d7182cbc6fe65b660aa0fd7e367318bfee610c0d9b7e41da4c4fe67656460c5\",\"fd75e8cb577a5e6e8c4cc0b38820f5988284cfb17be8faef60ef9a927c34475f\",\"a178170a1afc33fb5e7572e60a578fefc8e2ac7437ef11455d42ebfaf87fb7c8\",\"caa0fca6fefceddcb4f27c5ec12dfa97726f523d94d58f59823ef98ad18d7f87\",\"84d3107c4c18dbf5d21f6a38ebf6776ca19b8a9c9916a0e52ec8f1899a75c4f0\",\"f14062918a762cc1829a50a2c3cdebda87eb43738a8dc9a78c8ae1c039094421\",\"863237cc986324525fe84ab09709fc701037ff47d03134dcdb1abe0835480d6e\",\"575496a5650fcf48638fc3b6ba56020886a0826608711f51ce7d47d5778fae4f\",\"81f6e4c7978604f5155c712c379e48b94ac892271d8bee794391fc4599c9d1c9\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

func getSomeoneElseTx() *Transaction {
	// tx sended from handcash to false_tx_test_helper@bux-wallet1.4chain.dev (1000 satoshis)
	// https://www.whatsonchain.com/tx/82187e52b7e057122d4871852d1062238522588eb658617cf48c7ac02e388a08
	//txID := "82187e52b7e057122d4871852d1062238522588eb658617cf48c7ac02e388a08"
	txHex := "0100000002704273c86298166ac351c3aa9ac90a8029e4213b5f1b03c3bbf4bc5fb09cdd43010000006a4730440220398d6389e8a156a3c6c1ca355e446d844fd480193a93af832afd1c87d0f04784022050091076b8f7405b37ce6e795d1b92526396ac2b14f08e91649b908e711e2b044121030ef6975d46dbab4b632ef62fdbe97de56d183be1acc0be641d2c400ae01cf136ffffffff2f41ed6a2488ac3ba4a3c330a15fa8193af87f0192aa59935e6c6401d92dc3a00a0000006a47304402200ad9cf0dc9c90a4c58b08910740b4a8b3e1a7e37db1bc5f656361b93f412883d0220380b6b3d587103fc8bf3fe7bed19ab375766984c67ebb7d43c993bcd199f32a441210205ef4171f58213b5a2ddf16ac6038c10a2a8c3edc1e6275cb943af4bb3a58182ffffffff03e8030000000000001976a9148a8c4546a95e6fc8d18076a9980d59fd882b4e6988acf4010000000000001976a914c7662da5e0a6a179141a7872045538126f1e954288acf5000000000000001976a914765bdf10934f5aac894cf8a3795c9eeb494c013488ac00000000"
	blockHeight := uint64(814414)
	merkleProofJson := "{\"index\":37008,\"txOrId\":\"82187e52b7e057122d4871852d1062238522588eb658617cf48c7ac02e388a08\",\"targetType\":\"header\",\"target\":\"00e0ff2f886610c430f0b901065a1ae1258e8bfcadce03b2e8db2c040000000000000000d031f2c8b6ba0dfc710202a5d242a79636b7d4b1bcefec7e828cfc4a03516fd04aee2f6554be0b1854e634c6\",\"nodes\":[\"3228f78cfd3c96262ec521225f1b9dd6326b4d3e245d1551bb06258f2101cb65\",\"05267706279d2e5ebcf89ed0645d4283108c7e850cdb84aeb0974738ae447a8d\",\"5ad82f15dd63ed2ca1e319e91404c918b4a5e71312acdb0ad7c83136a38af360\",\"15c69ba0b2a2d8f503637db4053a2d551e86ef669fa25091c7a0a764ee32f15f\",\"b3841a856957ef968213b160d5a22cdc4db1bde9dc05fe9d43b906cf21af0bcc\",\"51ce3503a1bbe73a5b1594884e752b567aa6190f7ab4cdbed3e1a63262b2cc63\",\"bc50e5cc34225b3e3bbf9e0b7444cf4d90af70af115c8872832c0f5a45fc53e1\",\"9187bd785e2737c028e9faa81801193818deebdc6a5de6dd79c3dcd169ead577\",\"d143aab223e0c9c4025f58921f93043560efae88277f856951a28416f3e46302\",\"5cd848118c319ba93286e71e089b5585c8464dbf57b6a2cfea5e3e0b2e2972de\",\"ed41d9af8c4cfada67651a3db852abd27f97ead6200972f3e7b999ca31f8a568\",\"0f45052de20d4bdd15b81838fc26a67d5c36f66a05a8d602b756903fd8910b6a\",\"df4d66a947d89e258b818493f3460d88e7dd0b203de95958a74585b656ce7698\",\"c3719736ebc72175f49c82520d16fe83f983a139ec86577b92bcac5ce9c50b99\",\"d73795a577f57306eec549b9fdabeadf47bf50d0510a01b690f50503e594e74f\",\"d059074b8118309d1a8e74a4074ee45a1f903925911719bcd8a4ae58a344ad4d\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

func getTxReadyToSpend() *Transaction {
	// tx sended from handcash to false_tx_test@bux-wallet1.4chain.dev (1000 satoshis)
	// https://www.whatsonchain.com/tx/0c165cfc63963848fcbb00f6da64e078b99cfb88c46293313728c8fd0265e38a
	//txID := "0c165cfc63963848fcbb00f6da64e078b99cfb88c46293313728c8fd0265e38a"
	txHex := "01000000027b0a1b12c7c9e48015e78d3a08a4d62e439387df7e0d7a810ebd4af37661daaa000000006a47304402207d972759afba7c0ffa6cfbbf39a31c2aeede1dae28d8841db56c6dd1197d56a20220076a390948c235ba8e72b8e43a7b4d4119f1a81a77032aa6e7b7a51be5e13845412103f78ec31cf94ca8d75fb1333ad9fc884e2d489422034a1efc9d66a3b72eddca0fffffffff7f36874f858fb43ffcf4f9e3047825619bad0e92d4b9ad4ba5111d1101cbddfe010000006a473044022043f048043d56eb6f75024808b78f18808b7ab45609e4c4c319e3a27f8246fc3002204b67766b62f58bf6f30ea608eaba76b8524ed49f67a90f80ac08a9b96a6922cd41210254a583c1c51a06e10fab79ddf922915da5f5c1791ef87739f40cb68638397248ffffffff03e8030000000000001976a914b08f70bc5010fb026de018f19e7792385a146b4a88acf3010000000000001976a9147d48635f889372c3da12d75ce246c59f4ab907ed88acf7000000000000001976a914b8fbd58685b6920d8f9a8f1b274d8696708b51b088ac00000000"
	blockHeight := uint64(814414)
	merkleProofJson := "{\"index\":26524,\"txOrId\":\"0c165cfc63963848fcbb00f6da64e078b99cfb88c46293313728c8fd0265e38a\",\"targetType\":\"header\",\"target\":\"00e0ff2f886610c430f0b901065a1ae1258e8bfcadce03b2e8db2c040000000000000000d031f2c8b6ba0dfc710202a5d242a79636b7d4b1bcefec7e828cfc4a03516fd04aee2f6554be0b1854e634c6\",\"nodes\":[\"bdf86816f48280ea612349b0435b585a571a11cd0d97a5838ca53088723213db\",\"3c7a05468cbec89e38656d1bcf3f1f1a772878dbb5f76def16e5aa54697068e5\",\"7b5528b537beadc00987d6eba885517dfcdcfc3f5e76c8558f98cc138d02a601\",\"754d063eeaea31b8e79bc445e1a8c2e346f225b951e7ab1c97e117a2094fc61c\",\"a176885e1b00b39562db4f70a8b73b50d0e28a3fef774805db0ca2262612cf9c\",\"ad47ee74a8c7cbe59511f5293345e3fcc083cbed77bc550bf65f17336796eaae\",\"e9d7a9cc739b34267f8f504cc62a5b9a4b070319ee024ce8d6ff733db5507ff6\",\"68aafc3a48df5eb62faf58871f3e395adcc0f078b5a8dd501cc6d0ee7b4ce76c\",\"c1c8c5e42b80e4b09107f76a2ca96cdbd19d9805004d52621d14dd7be17524e3\",\"7a27692852731ae2722fbb3d3be96450299a82f2dca7a4a1c36cf294f46281b8\",\"77bb554c763fc856063fb1e4e268102ad6f73b4050e4803a6a5bd20df8d338a9\",\"2c34bd37df48b4958c334b75e662e4f682d500dcbfb508c5371ca4fee4c6ea6f\",\"7856e409b5c1a80af8c5bc0b6dc1bb657004ee0cd053fe9a2b3be26b354854bf\",\"444ddb0b389e53fd9237f3473835db1312aecad3ec7a731a31ee37a43174e3c2\",\"eb7a0020601b5f4ba40650df9658edcdbff814e02caf482470e2708729ef5a5d\",\"32a54c346b51c6a273b53a5939c7fb05cbaf6db5b936f325dbfc0330514f4891\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

func getTxReadyToSpend1() *Transaction {
	// tx sended from handcash to false_tx_test@bux-wallet1.4chain.dev (1000 satoshis)
	//https://www.whatsonchain.com/tx/862f2769dd1ff4a5c42e5b3ee9a455b3c987708e34e0d0c4748108882f1ac79f

	txHex := "01000000029ceda549c273cb093678c42c5765354c735c005cc1feb72e1a291f6bf3b3e312000000006a47304402204c992ff3b4185f9858e72e0b3d01d6d4ed144e363c13afe662c8edf37744e612022018fcd7e2492e365f738fb07fa5c1dfa84ab9f49469559f5540be1e115104066b4121031499e4d192d8e2b2409cb757608bee58701cf6d58d55cff97fa584671bce4728fffffffffc67309c8602eb6a14b805c27641337f114314ac09fa96b2974d73d11997639d010000006a473044022069eeddbc83b657ea6f40d1c6ae535a7993943ce5624494d6069b64fc45d17cef02202346f9131101d94bd15b0fb122f25fbc41e6d0b941b42eb79549c7cfb78e5ac441210242cf3c106badb9695cbf7c64039bce81b0a58cbf89b3a04d90577bc801b2a9efffffffff03e8030000000000001976a914ff98769820cd542ba0c6fc8f0db003ef51a6f84d88ac1f070000000000001976a914e11d3852660e0630189bfd178ed7652fb0be25de88acb8260000000000001976a9141fbd24e6a4b10ce1f04775d0e8e42c4406e3824b88ac00000000"
	blockHeight := uint64(820702)
	merkleProofJson := "{\"index\":3207,\"txOrId\":\"862f2769dd1ff4a5c42e5b3ee9a455b3c987708e34e0d0c4748108882f1ac79f\",\"targetType\":\"header\",\"target\":\"00a0fc30d76d9b2d4e6b2ee70c91a665a9b46f2843b2835b589793020000000000000000d3931a3ced1d755246098a41f2ee75d4ae8530ba98b2670d3b095351e8af5abf8db9696521b70b182c4980ad\",\"nodes\":[\"2b65a4e6ebda3ec9a7a38826601bc55fed5df36a733cdc907577fa8ada591466\",\"095bfc85f30125c60dee17eb1e0ffd6ae83af37f1b5295566e222e02c436a3a5\",\"67c6a791330c72f0522f36aa73ec47c7ce572c8c9493c139ba7631bb8f3a0118\",\"6a730c1e97c89e2f0b1f1e45622404713ae9e2098e6fe1e6e7631b0a290ad314\",\"b3ac544ccdc91141eccce7dbd9ca5d886d224155a43beb528b8bd042e5701942\",\"63c52ecf7b5e4193e4eee952788eb9f163de5e935b42b253111b7dc7e826e45a\",\"28e7512cb30e68c56adc846a7fff6f3f94af130de680f6d9b3dc67612b74eb39\",\"53aac3456855868b106eb70085c527d943dc725c8bdeb15c735c74aa86df7cd4\",\"6b271ef91d64412196e577dcec096529ce1e444a760378d1e115c4642fc45c72\",\"442b5dc652114ba8cf348b565aaf4b3e602d244852e0ef814d359fb556c7d37d\",\"1c84d6176d02c7d7d07c3dfef7d1ed1650eff8aab782ab362bc8085321fd8310\",\"ba5d92ac87192a916e9ad1768cdcd0f47a6466ad20f46b8952050aedaf318884\",\"e8f4ee4573c62c4c6a770d2547ace60609b00a866bf71656577d10fd6be44f4d\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

func getTxReadyToSpend2() *Transaction {
	//https: //www.whatsonchain.com/tx/8dc09f23956b49a6e363e53434b8a9842fc52df87dbb6be407091d7949a7aef8

	txHex := "0100000002418eb1b58f47af50a079e1c695e6ce86f79c092caf050128f0d7785381d960d3010000006a47304402207b019f395fdedfe3632433df49eba13e33d8c8f0328834eb0366635853c3e8ff0220505ef2df0702e918897019e49a486ecf8238b179d102cc3c0920564dd6a84d064121034e92b3e62017ee88487a69f8ecda9d17b4daf590d6e06362a4139b1d993dd044fffffffffea6861820d117e799caf1553ce075435f3ea153aff26c9551c71047be4089bb020000006a47304402207b58b596f1094c3e0570f136f1c86ae883a260b6fe671b07ccda85136561bab80220410924b50aa6a7ba9c864f8d206f1bba2c7b384127984e2a1e9db066f82379ca41210301b1d251f89768ff33a01c192a400de69573bdfc44fa67fde13eb259eb81ea64ffffffff03f4010000000000001976a914601d40068f463ce0124e1b18466e1bd7d6b333a388acf4010000000000001976a914668c08cab622e65e3aaa1c1365b8e4c029a6365688acb9260000000000001976a914e861b54724209a7eb9b0512f31c50c1ae2a07cb588ac00000000"
	blockHeight := uint64(820723)
	merkleProofJson := "{\"index\":1504,\"txOrId\":\"8dc09f23956b49a6e363e53434b8a9842fc52df87dbb6be407091d7949a7aef8\",\"targetType\":\"header\",\"target\":\"00c0c02d944c37493ed11271a5f11ce1f98d6d38f8d967ba3004c502000000000000000000faaebb8553b7cf81e0166cada8343e78a14dae8b3f5953641574f0e5dbfcaa74eb6965891b0c1815e4a33f\",\"nodes\":[\"5d583603063bf2877a1bb0f2e47a9387cffc498b69e9ce5242f778bf74b7c876\",\"67f114ddbfb56a7cd86e9e2769e235050adbacaeeeb98edf30cd9dca21a3f6ee\",\"c5a7fa878acda6663fdf8e07ffeb6eab9f41058f58a76e0c9959380cd9d7e3e1\",\"e955aaae334782dc0a85630881f4346c3d6939cb544b449360c3ffd1d4300f7f\",\"ab7a0d3ef733fbe0cacb7b56a4786639b167d68b475142450499de3e6c6c12b0\",\"849ea021bd419b3abe61131db3e772c3b331f6641003cf3e9f55ec276558cdbb\",\"19ea60070b4ee945e895819b3019238e8cbe4d92ccb4914c1786eb13872122e8\",\"4bef10d34e3a58e9b1db25377b38e8d4a345e0c34b270ce893aef5cc7a60e80b\",\"2188899cefe67d5d524bfa355659b93890e4bb52ba6516dc74858434fa04bd36\",\"1bbcc30ad9aa65bdaa28aadc52ac07a0e7fd8a25a4abd6ac8eb3696e4193bbe9\",\"26e16bccc398ad22fb6ee05b7811933da48996a179d73c3241585fda886f00c1\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

func getTxReadyToSpend3() *Transaction {
	// https: //www.whatsonchain.com/tx/e7cc494d1a9cedfbacdfcd512ab6d63073e30e9f84bdff42d8cf76a3e13ce995

	txHex := "01000000029fc71a2f88088174c4d0e0348e7087c9b355a4e93e5b2ec4a5f41fdd69272f86010000006a47304402203a5c238e8ceccff7b7db05a4dba524f6694599014dbac5ae92dc0c62635c8763022078cab36b04a16eeead80fa49dd4d1c22f14d8084c78977917cfe76fee9d95a84412102993285bd72def003516c414b4fb3c3718d5d003c90f08c75bd6eecc08910585fffffffff396915fa4cff57573f0e80b1d585d5a4f7692984e51577c8ea82e1d88f8404ce060000006a47304402205ba90f2ed3f70c779771185a473e3b1844ad0f8f86bddf39148ad277c9a2298902203df352b710b05501cc3d773e366854770038f9dea65c046b666fd28b124f303d412103c335fc77d28a0181bec42cd7afda547a4d524c5b1f04a7d9d0ec76f1217a0e5affffffff03f4010000000000001976a91494c77286c0552398575ea741337dc6143c7978ec88ac2b050000000000001976a91418d9eaafcf7d8e8ba29ac102ed19b9b3808376a088ac0f4e0000000000001976a914555b7d05b5327c78c7bf7f8748c1b3ce3552168888ac00000000"
	blockHeight := uint64(820723)
	merkleProofJson := "{\"index\":1574,\"txOrId\":\"e7cc494d1a9cedfbacdfcd512ab6d63073e30e9f84bdff42d8cf76a3e13ce995\",\"targetType\":\"header\",\"target\":\"00c0c02d944c37493ed11271a5f11ce1f98d6d38f8d967ba3004c502000000000000000000faaebb8553b7cf81e0166cada8343e78a14dae8b3f5953641574f0e5dbfcaa74eb6965891b0c1815e4a33f\",\"nodes\":[\"381eaf66eaed21bef5cdfdc3ff282481cd52af3cfd569f8eb51d5ca96a9832d2\",\"6cde1f82f0d1e9493a612dfb525dca1804a5d3dda1e342a76af436f39cdc8cf3\",\"b2e952046c283af1455985e91d9f897c67df1f74e6d59a57ca019d21b7a9f4b0\",\"82e71beeceecbbd971ac4b8caaaad32b2d1227299f3b94e98fc1dcf07d5a7bc3\",\"e2b192d05716d8d5b1ccc68f381d0256d9aab765105bd32738fc5a0efe8935fe\",\"12b8338df6bb1e23c71b1eee519c494f46a0058341d46f52d108ba883b81af51\",\"3e4acdb897d73f56822ebdf9b4d9e31bba9abcbc742d1e6bcf939f865b60ece8\",\"7b409b89b53c7717ca4aa222e196ed16344a3240e90b67ea795c38e0a59d3084\",\"93f3915cdcfaf870d6fe8fa92fb7b9800f6f9c658efed98d2413793777efc2c4\",\"874ede3eaf5a3424f285401515e2062d8ca0b6bca98a5c59e77e49a9ae5c3e7a\",\"26e16bccc398ad22fb6ee05b7811933da48996a179d73c3241585fda886f00c1\"]}"

	tx := getTx(txHex, blockHeight)
	markTxAsMined(tx, merkleProofJson)

	return tx
}

// TODO
func getTestDestination() *Destination {
	//toPaymail := "false_tx_test_helper@bux-wallet1.4chain.dev"

	dst := Destination{
		Type:          "pubkeyhash",
		Address:       "false_tx_test_helper@bux-wallet1.4chain.dev",
		Chain:         0,
		LockingScript: "76a9148ce2d21f9a75e98600be76b25b91c4fef6b40bcd88ac",
		Num:           114,
	}

	return &dst
}

func getTx(txHex string, bh uint64) *Transaction {
	itx := newIncomingTransaction(txHex)

	tx := newTransactionFromIncomingTransaction(itx)
	tx.BlockHeight = bh

	return tx
}

func markTxAsMined(tx *Transaction, merkleProofJson string) {
	mpjb := []byte(merkleProofJson)

	var mp bc.MerkleProof
	json.Unmarshal(mpjb, &mp)

	tx.BUMP = MerkleProofToBUMP(&mp, tx.BlockHeight)
}
